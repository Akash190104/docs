"use strict";(self.webpackChunkdevops_extensions_docs=self.webpackChunkdevops_extensions_docs||[]).push([[2373],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,l=e.mdxType,a=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),m=l,k=c["".concat(s,".").concat(m)]||c[m]||d[m]||a;return n?r.createElement(k,i(i({ref:t},u),{},{components:n})):r.createElement(k,i({ref:t},u))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var a=n.length,i=new Array(a);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3381:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return d}});var r=n(7462),l=n(3366),a=(n(7294),n(3905)),i=["components"],o={},s="Pull Request Description",p={unversionedId:"extensions/pull-request-utils/tasks/pull-request-description",id:"extensions/pull-request-utils/tasks/pull-request-description",title:"Pull Request Description",description:"Update pull request descriptions during pipeline runs",source:"@site/docs/extensions/pull-request-utils/tasks/pull-request-description.md",sourceDirName:"extensions/pull-request-utils/tasks",slug:"/extensions/pull-request-utils/tasks/pull-request-description",permalink:"/docs/extensions/pull-request-utils/tasks/pull-request-description",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"pullRequestUtils",previous:{title:"Pull Request Comments",permalink:"/docs/extensions/pull-request-utils/tasks/pull-request-comments"},next:{title:"Pull Request Status",permalink:"/docs/extensions/pull-request-utils/tasks/pull-request-status"}},u={},d=[{value:"YAML Snippet",id:"yaml-snippet",level:2},{value:"Arguments",id:"arguments",level:2},{value:"Examples",id:"examples",level:2},{value:"Append content",id:"append-content",level:3},{value:"Replace content",id:"replace-content",level:3},{value:"Set as variable",id:"set-as-variable",level:3},{value:"Other",id:"other",level:2}],c={toc:d};function m(e){var t=e.components,n=(0,l.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"pull-request-description"},"Pull Request Description"),(0,a.kt)("p",null,"Update pull request descriptions during pipeline runs"),(0,a.kt)("h2",{id:"yaml-snippet"},"YAML Snippet"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"- task: PullRequestDescription@0\n  inputs:\n    action: append #The action to perform\n    content: #The content to append or replace original description with. Required when action is `append` or `replace`. For Markdown syntax, see [Syntax guidance for basic Markdown usage](http://go.microsoft.com/fwlink/?LinkId=823918) **Supports usage of variables.**\n    keepAppendedContent: false #Will keep the content appended from other runs of the task. This will append the current content below the existing content. Applies to action `append`\n    useDefined: false #Use the pre-defined id for the pull request. If set, overrides the value from `System.PullRequest.PullRequestId`. Default: `false`\n    pullRequestId: $(System.PullRequest.PullRequestId) #If no id is given, the value from `System.PullRequest.PullRequestId` is taken. If a value is given, this overrides the value from `System.PullRequest.PullRequestId`\n    outputVariable: PullRequest.DescriptionContent #The name of the output variable to write the description to. Default `PullRequest.DescriptionContent`. Applies to actions `view`\n    isOutput: #If set, `outputVariable` is set as output and accessible from other jobs. Applies to actions `view`\n    stripIdentifiers: false #Strip internal modifiers before setting variable. Applies to actions `view`\n\n")),(0,a.kt)("h2",{id:"arguments"},"Arguments"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Argument"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"action")," ",(0,a.kt)("br",null),"Action"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"(Required)")," The action to perform ",(0,a.kt)("br",null)," Options: ",(0,a.kt)("inlineCode",{parentName:"td"},"append"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"replace"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"view")," ",(0,a.kt)("br",null)," Default value: ",(0,a.kt)("inlineCode",{parentName:"td"},"append"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"content")," ",(0,a.kt)("br",null),"Content"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"(Required)")," The content to append or replace original description with. Required when action is ",(0,a.kt)("inlineCode",{parentName:"td"},"append")," or ",(0,a.kt)("inlineCode",{parentName:"td"},"replace"),". For Markdown syntax, see ",(0,a.kt)("a",{parentName:"td",href:"http://go.microsoft.com/fwlink/?LinkId=823918"},"Syntax guidance for basic Markdown usage")," ",(0,a.kt)("strong",{parentName:"td"},"Supports usage of variables.")," ",(0,a.kt)("br",null))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"keepAppendedContent")," ",(0,a.kt)("br",null),"Keep appended content"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"(Optional)")," Will keep the content appended from other runs of the task. This will append the current content below the existing content. Applies to action ",(0,a.kt)("inlineCode",{parentName:"td"},"append")," ",(0,a.kt)("br",null))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"useDefined")," ",(0,a.kt)("br",null),"Use defined id"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"(Optional)")," Use the pre-defined id for the pull request. If set, overrides the value from ",(0,a.kt)("inlineCode",{parentName:"td"},"System.PullRequest.PullRequestId"),". Default: ",(0,a.kt)("inlineCode",{parentName:"td"},"false")," ",(0,a.kt)("br",null))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"pullRequestId")," ",(0,a.kt)("br",null),"Pull Request Id"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"(Optional)")," If no id is given, the value from ",(0,a.kt)("inlineCode",{parentName:"td"},"System.PullRequest.PullRequestId")," is taken. If a value is given, this overrides the value from ",(0,a.kt)("inlineCode",{parentName:"td"},"System.PullRequest.PullRequestId")," ",(0,a.kt)("br",null)," Default value: ",(0,a.kt)("inlineCode",{parentName:"td"},"$(System.PullRequest.PullRequestId)"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"outputVariable")," ",(0,a.kt)("br",null),"Output Variable"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"(Optional)")," The name of the output variable to write the description to. Default ",(0,a.kt)("inlineCode",{parentName:"td"},"PullRequest.DescriptionContent"),". Applies to actions ",(0,a.kt)("inlineCode",{parentName:"td"},"view")," ",(0,a.kt)("br",null)," Default value: ",(0,a.kt)("inlineCode",{parentName:"td"},"PullRequest.DescriptionContent"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"isOutput")," ",(0,a.kt)("br",null),"Is output"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"(Optional)")," If set, ",(0,a.kt)("inlineCode",{parentName:"td"},"outputVariable")," is set as output and accessible from other jobs. Applies to actions ",(0,a.kt)("inlineCode",{parentName:"td"},"view")," ",(0,a.kt)("br",null))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"stripIdentifiers")," ",(0,a.kt)("br",null),"Strip Identifiers"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"(Optional)")," Strip internal modifiers before setting variable. Applies to actions ",(0,a.kt)("inlineCode",{parentName:"td"},"view")," ",(0,a.kt)("br",null))))),(0,a.kt)("h2",{id:"examples"},"Examples"),(0,a.kt)("h3",{id:"append-content"},"Append content"),(0,a.kt)("p",null,"Append will append content to the end of the PR on the first run. On sequential runs the content will be replaced. A markdown comment will be added to the pull request so the task knows where to replace content from."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"steps:\n  - task: PullRequestDescription@0\n    inputs:\n      action: 'append'\n      content: 'This content will be appended to the bottom of the PR description'\n")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"replace-content"},"Replace content"),(0,a.kt)("p",null,"The following configuration will replace the entire pull request description on each run."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"steps:\n  - task: PullRequestDescription@0\n    inputs:\n      action: 'replace'\n      content: 'This content will be the only part of the PR description'\n")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"set-as-variable"},"Set as variable"),(0,a.kt)("p",null,"Write the content of description to a variable."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"steps:\n  - task: PullRequestDescription@0\n    name: setDescriptionVariable\n    inputs:\n      action: 'view'\n      outputVariable: 'PullRequest.DescriptionContent'\n      isOutput: true\n      stripIdentifiers: false\n  - script: echo $(setDescriptionVariable.PullRequest.DescriptionContent)\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"PullRequestDescription")," uses some interal modifiers to know where to append content to. If you wish to remove these before setting the variable, set ",(0,a.kt)("inlineCode",{parentName:"p"},"stripIdentifiers")," to true."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"other"},"Other"),(0,a.kt)("p",null,"Setting the environment variable ",(0,a.kt)("inlineCode",{parentName:"p"},"PRU_DESC_LOG=true")," will write the old description to the log. This is mostly used during development and testing, but might be nice to know."))}m.isMDXComponent=!0}}]);